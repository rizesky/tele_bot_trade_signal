# =============================================================================
# TRADING SIGNAL BOT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your actual values

# =============================================================================
# BINANCE API CONFIGURATION (REQUIRED)
# =============================================================================
# Get these from https://www.binance.com/en/my/settings/api-management
BINANCE_API_KEY=your_binance_api_key_here
BINANCE_API_SECRET=your_binance_api_secret_here

# Binance environment: dev (testnet) or prod (mainnet)
BINANCE_ENV=dev

# Binance WebSocket URL (optional, uses default if not set)
BINANCE_WS_URL=wss://fstream.binance.com/ws/

# =============================================================================
# TELEGRAM CONFIGURATION (REQUIRED)
# =============================================================================
# Create a bot at https://t.me/BotFather to get the token
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# Get your chat ID by messaging @userinfobot on Telegram
TELEGRAM_CHAT_ID=your_telegram_chat_id_here

# Telegram API URLs (required)
TELEGRAM_SEND_MESSAGE_URL=https://api.telegram.org/bot{token}/sendMessage
TELEGRAM_SEND_PHOTO_URL=https://api.telegram.org/bot{token}/sendPhoto

# =============================================================================
# TRADING CONFIGURATION
# =============================================================================
# Trading symbols (OPTIONAL - leave empty to auto-fetch from Binance)
# If empty, bot will automatically fetch all available futures symbols
# If specified, use comma-separated list: BTCUSDT,ETHUSDT,BNBUSDT
SYMBOLS=

# Timeframes to monitor (REQUIRED)
# Supported: 1m,3m,5m,15m,30m,1h,2h,4h,6h,8h,12h,1d,3d,1w,1M
TIMEFRAMES=15m,30m,1h,4h

# Historical data settings
# Maximum: 1500 (Binance API limit)
HISTORY_CANDLES=200

# Signal cooldown in seconds for simulation mode (live mode uses timeframe-based cooldown)
SIGNAL_COOLDOWN=300

# =============================================================================
# RISK MANAGEMENT
# =============================================================================
# Stop loss percentage (0.02 = 2%)
DEFAULT_SL_PERCENT=0.02

# Take profit levels (comma-separated percentages)
DEFAULT_TP_PERCENTS=0.015,0.03,0.05,0.08

# Maximum leverage to use
MAX_LEVERAGE=20

# Leverage-based TP/SL configuration
LEVERAGE_BASED_TP_SL_ENABLED=1
LEVERAGE_BASE_RISK_PERCENT=2.0
LEVERAGE_BASE_TP_PERCENT=1.0
LEVERAGE_MIN_SL_DISTANCE=0.1
LEVERAGE_MAX_SL_DISTANCE=5.0
LEVERAGE_MIN_TP_DISTANCE=0.2
LEVERAGE_MAX_TP_DISTANCE=3.0

# Market cap filtering (1 = enabled, 0 = disabled)
FILTER_BY_MARKET_CAP=0

# =============================================================================
# PERFORMANCE & CONCURRENCY
# =============================================================================
# Lazy loading for historical data (1 = enabled, 0 = disabled)
# Recommended: 1 (enabled) for better performance with many symbols
LAZY_LOADING_ENABLED=1

# Maximum symbols to lazy load historical data for
MAX_LAZY_LOAD_SYMBOLS=100

# Maximum concurrent API requests for historical data loading
# Higher values = faster loading but more API usage
MAX_CONCURRENT_LOADS=15

# =============================================================================
# SYMBOL SELECTION & LIMITING
# =============================================================================
# Maximum number of symbols to monitor 
# Leave undefined/commented for unlimited, or set a number (recommended: 50-200 for production)
# Reduces resource usage while maintaining signal quality
MAX_SYMBOLS=100

# Symbol selection strategy: quality, volume, or random
# quality = Best overall trading opportunities (recommended for production)
# volume = Highest volume symbols (good for liquidity)  
# random = Random selection (testing only)
SYMBOL_SELECTION_STRATEGY=quality

# Minimum daily trading volume in USDT (filters out low-liquidity symbols)
# Recommended: 1M+ for production, 100K+ for testing
MIN_DAILY_VOLUME_USDT=1000000

# Minimum market cap in USD (0 = disabled, requires CoinGecko API)
# Works in conjunction with FILTER_BY_MARKET_CAP setting
# Example: 1000000000 = $1B minimum market cap
MIN_MARKET_CAP_USD=0

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# Enable SQLite database for persistence (1 = enabled, 0 = disabled)
# Stores historical data, signals, and bot state across restarts
DB_ENABLE_PERSISTENCE=1

# SQLite database file path
DB_PATH=trading_bot.db

# Database connection pool size (for concurrent access)
DB_POOL_SIZE=10

# Days to keep historical data in database (older data will be cleaned up)
# Reduced from 30 to 7 days to prevent rapid growth
DB_CLEANUP_DAYS=7

# =============================================================================
# DATABASE SIZE MANAGEMENT
# =============================================================================
# Maximum database size in MB before automatic cleanup (default: 200 MB)
DB_MAX_SIZE_MB=200

# Maximum total records before automatic cleanup (default: 1M records)
DB_MAX_RECORDS=1000000

# Enable automatic cleanup when limits are exceeded (1 = enabled, 0 = disabled)
DB_AUTO_CLEANUP_ENABLED=1

# Hours between automatic cleanup checks (default: 6 hours)
DB_CLEANUP_INTERVAL_HOURS=6

# =============================================================================
# OPERATION MODES
# =============================================================================
# Simulation mode (1 = enabled, 0 = disabled)
# When enabled: reduces API calls, uses test data
SIMULATION_MODE=0

# Data testing mode (1 = enabled, 0 = disabled)
# When enabled: generates test signals for development
DATA_TESTING=0

# =============================================================================
# RATE LIMITING CONFIGURATION (RECOMMENDED)
# =============================================================================
# Enable rate limiting to prevent API bans (1 = enabled, 0 = disabled)
# HIGHLY RECOMMENDED: Keep enabled to avoid getting banned by Binance
RATE_LIMITING_ENABLED=1

# Safety margin percentage (0.1 = 10% safety margin)
# Higher values = more conservative, lower chance of hitting limits
# Lower values = more aggressive, higher API usage but risk of bans
RATE_LIMIT_SAFETY_MARGIN=0.1

# Warning threshold percentage (0.8 = 80% warning threshold)
# Bot will log warnings when usage exceeds this percentage
RATE_LIMIT_WARNING_THRESHOLD=0.8

# Maximum weight per minute (Binance standard: 1200)
# Only change if you have special API access
RATE_LIMIT_MAX_WEIGHT_PER_MINUTE=1200

# Maximum requests per minute (Binance standard: 1200)
# Only change if you have special API access
RATE_LIMIT_MAX_REQUESTS_PER_MINUTE=1200

# Retry delay in seconds when rate limited
RATE_LIMIT_RETRY_DELAY=1.0

# Maximum retry attempts for blocked requests
RATE_LIMIT_MAX_RETRIES=3

# Enable detailed rate limiting logging (1 = enabled, 0 = disabled)
# Shows detailed usage statistics and warnings
RATE_LIMIT_DETAILED_LOGGING=1

# Rate limiting log interval in seconds (how often to log stats)
RATE_LIMIT_LOG_INTERVAL=60

# =============================================================================
# OPTIONAL: COINGECKO API (for market cap filtering)
# =============================================================================
# Get free API key from https://www.coingecko.com/en/api
# COINGECKO_API_KEY=your_coingecko_api_key_here
